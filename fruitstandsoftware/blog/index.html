
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Core Fruition</title>
  <meta name="author" content="Michael Fey">

  
  <meta name="description" content="With the awesome announcement of Swift last week, alongside all of the other incredible announcements, I&rsquo;m sure that your reaction was similar &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://fruitstandsoftware.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Core Fruition" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Core Fruition</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:fruitstandsoftware.com/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/09/gcd-in-swift-it-just-works/">GCD in Swift: It Just Works</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-09T17:02:07-04:00" pubdate data-updated="true">Jun 9<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>With the awesome announcement of <a href="https://developer.apple.com/swift/">Swift</a> last week, alongside <a href="https://developer.apple.com/technologies/">all of the other incredible announcements,</a> I&rsquo;m sure that your reaction was similar to mine: Where do I begin?!</p>

<p>I&rsquo;ve been reading <a href="https://itunes.apple.com/us/book/swift-programming-language/id881256329?mt=11">the book</a>, watching <a href="https://developer.apple.com/videos/wwdc/2014/">the sessions</a>, checking out <a href="https://developer.apple.com/library/prerelease/ios/navigation/">the sample code</a>, and basically trying to orient myself with the new syntax as much as possible.</p>

<p>One question I had today while listening to the latest episode of the <a href="http://www.imore.com/debug">Debug</a> podcast was, &ldquo;How will Grand Central Dispatch (GCD) work in Swift? Will GCD work in Swift?&rdquo; With that question in mind I settled in, opened Xcode, and chose File > New > Project&hellip;</p>

<p>I chose a <em>Single View Application</em> since I wouldn&rsquo;t need much of app to answer my question. I named it SwiftlyGCD and chose Swift as the language. I opened <code>ViewController.swift</code> and started typing out <code>dispatch</code> to see what would code-complete. Happily all of the wonderful GCD methods that we know and love appeared in the code-completion list in their Swift-equivalent notation.</p>

<p>For instance, <code>dispatch_async()</code> in Objective-C looks like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="kt">void</span> <span class="nf">dispatch_async</span><span class="p">(</span><span class="n">dispatch_queue_t</span> <span class="n">queue</span><span class="p">,</span> <span class="n">dispatch_block_t</span> <span class="n">block</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Whereas in Swift it appears like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">dispatch_async</span><span class="p">(</span><span class="nl">queue:</span> <span class="n">dispatch_queue_t</span><span class="o">!</span><span class="p">,</span> <span class="nl">block:</span> <span class="n">dispatch_block_t</span><span class="o">!</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see we get a one for one translation from C to Swift thanks to Xcode 6. Additionally we get some extra niceties like named parameters. What does the code look like in usage?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'>  <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">println</span><span class="p">(</span><span class="s">&quot;Currently dispatched asynchronously&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>The call to <code>dispatch_get_main_queue()</code> is exactly the same as we&rsquo;re used to, while the block syntax is simplified to just a pair of <code>{}</code>.</p>

<p>Bottom line: GCD is fully available in Swift and works exactly as we&rsquo;d expect. Way to go Apple!</p>

<p><strong>UPDATES</strong></p>

<p>After this post went live on Twitter <a href="http://twitter.com/jacobgorban/">Jacob Gorban</a> replied and said, <a href="http://twitter.com/jacobgorban/status/476353702857424897">&ldquo;It should even work with trailing block, no?&rdquo;</a></p>

<p>He&rsquo;s right! You can write the above dispatch like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'>  <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">println</span><span class="p">(</span><span class="s">&quot;Currently dispatched asynchronously&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/23/sponsoring-the-wwdc-2013-photo-walk/">Sponsoring the WWDC 2013 Photo Walk</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-23T15:49:53-04:00" pubdate data-updated="true">May 23<span>rd</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you haven&rsquo;t heard, the second annual <a href="http://www.fruitstandsoftware.com/blog/2013/05/wwdc-2013-photo-walk/">WWDC Photo Walk is set for Wednesday June 12th at 6:15 PM</a>. If you&rsquo;d like to sponsor the walk I&rsquo;d love to have you on board. Now you may be asking yourself, &ldquo;Sponsorship? What costs are associated with a photo walk?&rdquo; Well that&rsquo;s the beauty of it, there are none! Sponsorship in this case means having your product or company name listed in the walk details, promoted on the <a href="http://twitter.com/wwdcphotowalk">WWDC Photo Walk Twitter account</a>, and promoted within the <a href="https://app.glassboard.com/web/invitation/code/nyzzu">WWDC Photo Walk Glassboard</a> in exchange for some promo codes or discounts given out to the walk participants.</p>

<p>For instance, last year we had <a href="http://www.fruitstandsoftware.com/blog/2012/06/wwdc-2012-photo-walk/">500px sponsor us</a> with one Awesome and one Plus account for the two folks <a href="http://www.fruitstandsoftware.com/blog/2012/06/wwdc-2012-photo-walk-wrap-up/">whose photos were the best</a>.</p>

<p>So if you&rsquo;re interested please send me an email at michael at this domain and we&rsquo;ll get the ball rolling.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/23/wwdc-2013-photo-walk/">WWDC 2013 Photo Walk</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-23T15:19:04-04:00" pubdate data-updated="true">May 23<span>rd</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>[Updated] </strong>Last week I put out the call for sponsors and OMGWTFBBQ did people respond. Check out the great list of sponsors for this year&rsquo;s walk, in alphabetical order:</p>

<p><a href="https://agilebits.com/onepassword"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/1Password.png" alt="1Password" /></a>
<strong>1Password</strong></p>

<p>The fine folks at <a href="https://agilebits.com/">AgileBits</a> have offered up a free copy of <a href="https://agilebits.com/onepassword/mac">1Password for Mac</a> to each walk participant. 25 lucky folks will also receive a promo code for <a href="https://agilebits.com/onepassword/ios">1Password for iOS</a>.</p>

<p>If you&rsquo;re not able to attend the walk AgileBits is currently <a href="http://blog.agilebits.com/2013/05/29/get-50-off-1password-and-knox-100-more-security-in-your-life/">running a 50% sale</a>, so get it while it&rsquo;s hot!</p>

<p><a href="http://www.flyingmeat.com/acorn/"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/Acorn.png" alt="Acorn" /></a>
<strong>Acorn</strong></p>

<p><a href="https://twitter.com/ccgus">Gus Mueller</a>&rsquo;s venerable image editing app <a href="http://www.flyingmeat.com/acorn/">Acorn</a> hit version 4.0 this year and to celebrate Gus is giving away a couple of copies to the folks that come away with the best photos from this year&rsquo;s walk.</p>

<p>Additionally, Gus is offering up a discount code for Acorn to every other participant.</p>

<p><a href="http://www.geotagbee.com/"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/geotagbee.png" alt="geotagbee" /></a>
<strong>GeoTagBee</strong></p>

<p><a href="https://twitter.com/ekurutepe">Engin Kurutepe</a> is offering up a number of copies of his brand new app <a href="http://www.geotagbee.com/">GeoTagBee</a>. GeoTagBee is a simple iPhone app which records your location in the background and exports your trips as GPX files to your Dropbox or Email. These GPX files then can be used in Lightroom or Aperture to geotag your photos.</p>

<p>Engin has also hinted that he may bring one or two souvenirs from Berlin to give away to some lucky participants.</p>

<p><strong><a href="http://macphun.com"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/macphun_logo.png" alt="macphun_logo" /></a></strong></p>

<p>The gents at <a href="http://macphun.com">MacPhun</a> surprised us during last year&rsquo;s walk by turning up and giving everyone a copy of their awesome photo editing app <a href="http://snapheal.macphun.com/jh">Snapheal</a>. This year they&rsquo;re back with more. In their own words:</p>

<p>MacPhun is one of the leading developers of photography applications for Mac and iOS. Their app Snapheal was named one of 2012 Best Mac App Store apps. And <a href="https://itunes.apple.com/us/app/fx-photo-studio-pro-effects/id312506856?mt=8">FX Photo Studio for iPhone</a> (free for limited time) is about to pass 10 million downloads. MacPhun Team has a new photo app coming this summer and everyone who registers for the WWDC photo walk will get a free copy of it. The beta version of the app will be available to a limited number of photographers (and all those who sign up for the WWDC photo walk) later in June. Meanwhile you can get MacPhun&rsquo;s Snapheal with a 40% discount. Check it <a href="https://itunes.apple.com/us/app/snapheal/id480623975?mt=12">here</a>.</p>

<p><a href="http://nothirst.com/moneywell/"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/MoneyWell.png" alt="MoneyWell" /></a>
<strong>MoneyWell</strong></p>

<p>Let&rsquo;s face it, photography gear is expensive and it takes discipline to save up your money for that next great lens and budget properly for all your other expenses.</p>

<p>Luckily No Thirst is here to help. <a href="https://twitter.com/kevinhoctor">Kevin Hoctor</a> has generously offered up a free copy of <a href="http://nothirst.com/moneywell/">MoneyWell for Mac</a> to every walk participant.</p>

<p>MoneyWell is personal finance software that increases your wealth while reducing your debt. It does this by wrapping the tried and true envelope-budgeting system in a beautiful, modern interface.</p>

<p>If you&rsquo;re not able to attend the walk then you should grab MoneyWell now, <a href="http://mad.ly/97b2c3">version 2.2 has just been released and is 22% off for 2.2 weeks</a>. That makes it $38.99 until June 14, 2013.</p>

<p><a href="http://www.pixelmator.com"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/Pixelmator.png" alt="Pixelmator" /></a>
<strong>Pixelmator</strong></p>

<p><a href="http://www.pixelmator.com">Pixelmator</a> has been a juggernaut in the Mac app scene and the folks on the Pixelmator team have been kind enough to offer up a free license to one lucky walk participant.</p>

<p>Pixelmator has been built exclusively for OS X and it shows. The latest version, 2.2 Blueberry, adds a ton of great features and they are showing no signs of slowing down.</p>

<p><a href="https://printzel.it"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/printzel-brandmark.png" alt="Printzel" /></a>
<strong>Printzel</strong></p>

<p>Ordering high quality photo books directly from your iPad gets a huge step up with <a href="https://printzel.it">Printzel</a>. This very cool app lets you take photos directly from your iPad&rsquo;s photo collection and turn them into beautiful hard or soft cover books that will be delivered directly to your door.</p>

<p>Also ratcheting up the cool factor is the fact that they&rsquo;ve also <a href="https://printzel.it/developer">released an SDK</a> that enables app developers to offer printed books right from within their own apps.</p>

<p>Every walk attendee will receive a 25%-off coupon code and 10 others will each receive a coupon for 100%-off their order!</p>

<p><a href="http://frosthaus.com/sequence/"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/06/20130606-204644.jpg" alt="Sequence" /></a>
<strong>Sequence</strong></p>

<p><a href="http://frosthaus.com/sequence/">Sequence</a> is a very cool time lapse post-production app that takes the scores of images you make during a time lapse session and assembles them into a white-balanced, deflickered video.</p>

<p>A handful of lucky walk attendees will be walking away with free copies of Sequence this year thanks to the good people at <a href="http://frosthaus.com">Frosthaus</a>.</p>

<p><strong>[Original Post]</strong></p>

<h1>tl;dr version:</h1>

<p><strong>What:</strong> A photo walk during WWDC</p>

<p><strong>When:</strong> Wednesday, June 12th from 6:15 &ndash; ?</p>

<p><strong>Who:</strong> You, me, and all our friends.</p>

<p><strong>Why:</strong> Because making photos is fun and doing it with a bunch of people has to be fun too, right?</p>

<p><strong>Where:</strong> <a href="http://goo.gl/maps/Yuu2a">From the Powell Street BART to Pier 39</a>. Please note this is a longer walk this year (about 2 miles) with some decent uphill sections.</p>

<p><strong>RSVP:</strong> Not required, but it&rsquo;d be nice to hear that you&rsquo;re coming. Send me a message on <a href="http://twitter.com/MrRooni">Twitter</a> or an email to michael at this domain.</p>

<p><strong>Connect: </strong>WWDCPhotoWalk on <a href="http://twitter.com/wwdcphotowalk">Twitter</a> and <a href="http://alpha.app.net/wwdcphotowalk">App.net</a>. We&rsquo;re also running a Glassboard for this one, which I highly recommend you join: <a href="https://app.glassboard.com/web/invitation/code/nyzzu">WWDC Photo Walk Glassboard</a>.</p>

<h1>The Long Winded Version</h1>

<p>During WWDC we have an awesome opportunity to get together with other photo geeks and make some great photos of one of the coolest cities in the world. As such, I figured it would be cool to organize a photo walk. We&rsquo;ll meet up on the <a href="http://goo.gl/maps/AW4G">street at the Powell Street BART</a> at 6:15 on Wednesday, June 12th. There are usually a good number of street performers around so it should make for a great location to wait while everyone shows up. Shortly thereafter we&rsquo;ll head north on Powell Street and head towards San Francisco&rsquo;s famous <a href="http://www.pier39.com/home/attractions/on-the-pier/sea-lions/">Pier 39</a>.</p>

<p>Sunset is at <a href="http://www.timeanddate.com/worldclock/astronomy.html?n=224&amp;month=6&amp;year=2013&amp;obj=sun&amp;afl=-11&amp;day=1">8:32PM</a> and if we time it right we should get some cool light to end the walk.</p>

<p>There&rsquo;s no need to RSVP, but it&rsquo;d be great to know if you&rsquo;re coming so please send me a message on <a href="http://twitter.com/MrRooni">Twitter</a> or an email to michael at this domain.</p>

<p>This year we&rsquo;re going to be using <a href="https://app.glassboard.com/web/invitation/code/nyzzu">Glassboard</a> for any realtime communication once we&rsquo;re all in San Francisco. If you need to get a hold of me in a time-sensitive way use <a href="https://app.glassboard.com/web/invitation/code/nyzzu">the Glassboard,</a> I will have all its push notifications turned on.</p>

<p><a href="http://goo.gl/maps/Yuu2a"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/Screenshot_5_23_13_3_12_PM.png" alt="Powell Street BART to Pier 39" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/10/link-dump/">Link Dump</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-10T13:17:18-04:00" pubdate data-updated="true">Apr 10<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While going through my <a href="http://getpocket.com">Pocket</a> backlog I read quite a few excellent blog posts that I had saved for later. If you haven&rsquo;t checked these out yet, I highly recommend taking a few moments to do so.</p>

<p><a href="http://jury.me/blog/2013/3/30/mvp">You Need an MVP</a> by <a href="https://alpha.app.net/jury/">Michael Jurewitz</a></p>

<p><a href="http://jury.me/blog/2013/3/30/focus-on-the-user">Focus on the User</a> by <a href="https://alpha.app.net/jury/">Michael Jurewitz</a></p>

<p><a href="http://mhay68.tumblr.com/post/1453507877/the-12-hour-rule">The 12 Hour Rule</a> by <a href="https://twitter.com/hay">Mike Hay</a></p>

<p>And lastly, a more technical entry, <a href="http://robots.thoughtbot.com/post/46668544473/designing-for-ios-blending-modes">Designing for iOS: Blending modes</a> by <a href="https://twitter.com/thoughtbot">Gordon Fontenot</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/19/uitableview-and-nsfetchedresultscontroller-updates-done-right/">UITableView and NSFetchedResultsController: Updates Done Right</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-19T13:56:05-05:00" pubdate data-updated="true">Feb 19<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While working on <a href="http://nothirst.com/moneywellexpress/">MoneyWell Express</a> 1.0 I decided to finally sit down and figure out a bug that had plagued me for a long time: Periodic and seemingly random crashes when updating MoneyWell&rsquo;s transaction UITableView. If you&rsquo;ve spent any significant time with UITableView you&rsquo;ve undoubtably seen an error similar to this one:</p>

<pre><code>*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:1070
CoreData: error: Serious application error.
An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:.
Invalid update: invalid number of rows in section 2.
The number of rows contained in an existing section after the update (2) must be equal to the number of rows contained in that section before the update (1),
plus or minus the number of rows inserted or deleted from that section (0 inserted, 0 deleted) and
plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out). with userInfo (null)
</code></pre>

<p>The problem with this bug for me was that it was intermittent and never reliably reproducible &ndash; until it was. One day while working on our <a href="https://github.com/nothirst/TICoreDataSync/">syncing framework</a> I had this issue start to reproduce itself every time MoneyWell Express attempted to consume some sync changes and I seized the opportunity to finally figure out what was going on.</p>

<p>Let&rsquo;s start by taking a look at the sample code Apple provides on the <a href="http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html">NSFetchedResultsControllerDelegate Protocol Reference</a>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm">   Assume self has a property &#39;tableView&#39; -- as is the case for an instance of a UITableViewController</span>
</span><span class='line'><span class="cm">   subclass -- and a method configureCell:atIndexPath: which updates the contents of a given cell</span>
</span><span class='line'><span class="cm">   with information from a managed object at the given index path in the fetched results controller.</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controllerWillChangeContent:</span><span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">beginUpdates</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controller:</span><span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span> <span class="nf">didChangeSection:</span><span class="p">(</span><span class="kt">id</span> <span class="p">)</span><span class="nv">sectionInfo</span>
</span><span class='line'>    <span class="nf">atIndex:</span><span class="p">(</span><span class="n">NSUInteger</span><span class="p">)</span><span class="nv">sectionIndex</span> <span class="nf">forChangeType:</span><span class="p">(</span><span class="n">NSFetchedResultsChangeType</span><span class="p">)</span><span class="nv">type</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">case</span> <span class="nl">NSFetchedResultsChangeInsert:</span>
</span><span class='line'>            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">insertSections:</span><span class="p">[</span><span class="n">NSIndexSet</span> <span class="nl">indexSetWithIndex:</span><span class="n">sectionIndex</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationFade</span><span class="p">];</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="k">case</span> <span class="nl">NSFetchedResultsChangeDelete:</span>
</span><span class='line'>            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">deleteSections:</span><span class="p">[</span><span class="n">NSIndexSet</span> <span class="nl">indexSetWithIndex:</span><span class="n">sectionIndex</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationFade</span><span class="p">];</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controller:</span><span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span> <span class="nf">didChangeObject:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">anObject</span> <span class="nf">atIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
</span><span class='line'>          <span class="nf">forChangeType:</span><span class="p">(</span><span class="n">NSFetchedResultsChangeType</span><span class="p">)</span><span class="nv">type</span> <span class="nf">newIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">newIndexPath</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">UITableView</span> <span class="o">*</span><span class="n">tableView</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">tableView</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">case</span> <span class="nl">NSFetchedResultsChangeInsert:</span>
</span><span class='line'>            <span class="p">[</span><span class="n">tableView</span> <span class="nl">insertRowsAtIndexPaths:</span><span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithObject:</span><span class="n">newIndexPath</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationFade</span><span class="p">];</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="k">case</span> <span class="nl">NSFetchedResultsChangeDelete:</span>
</span><span class='line'>            <span class="p">[</span><span class="n">tableView</span> <span class="nl">deleteRowsAtIndexPaths:</span><span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithObject:</span><span class="n">indexPath</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationFade</span><span class="p">];</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">case</span> <span class="nl">NSFetchedResultsChangeUpdate:</span>
</span><span class='line'>            <span class="p">[</span><span class="n">self</span> <span class="nl">configureCell:</span><span class="p">[</span><span class="n">tableView</span> <span class="nl">cellForRowAtIndexPath:</span><span class="n">indexPath</span><span class="p">]</span> <span class="nl">atIndexPath:</span><span class="n">indexPath</span><span class="p">];</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">case</span> <span class="nl">NSFetchedResultsChangeMove:</span>
</span><span class='line'>            <span class="p">[</span><span class="n">tableView</span> <span class="nl">deleteRowsAtIndexPaths:</span><span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithObject:</span><span class="n">indexPath</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationFade</span><span class="p">];</span>
</span><span class='line'>            <span class="p">[</span><span class="n">tableView</span> <span class="nl">insertRowsAtIndexPaths:</span><span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithObject:</span><span class="n">newIndexPath</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationFade</span><span class="p">];</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controllerDidChangeContent:</span><span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">endUpdates</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see this code starts the tableView updates in controllerWillChangeContent:, responds to each change as it happens, and then ends the tableView updates in controllerDidChangeContent:. The problem I ran into with this code is that inserting sections into the table also inserted all the rows for that new section, but since those rows were also being reported as inserted we would get twice the number of rows inserted when adding a new section to the table. The answer was to queue up all the updates that the fetchedResultsController reported and then respond to them all at once, like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@interface</span> <span class="nc">SomeViewController</span> <span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Declare some collection properties to hold the various updates we might get from the NSFetchedResultsControllerDelegate</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">NSMutableIndexSet</span> <span class="o">*</span><span class="n">deletedSectionIndexes</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">NSMutableIndexSet</span> <span class="o">*</span><span class="n">insertedSectionIndexes</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">deletedRowIndexPaths</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">insertedRowIndexPaths</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">updatedRowIndexPaths</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">SomeViewController</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#pragma mark - NSFetchedResultsControllerDelegate methods</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controller:</span><span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span> <span class="nf">didChangeObject:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">anObject</span> <span class="nf">atIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
</span><span class='line'>          <span class="nf">forChangeType:</span><span class="p">(</span><span class="n">NSFetchedResultsChangeType</span><span class="p">)</span><span class="nv">type</span> <span class="nf">newIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">newIndexPath</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="n">NSFetchedResultsChangeInsert</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="nl">containsIndex:</span><span class="n">newIndexPath</span><span class="p">.</span><span class="n">section</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// If we&#39;ve already been told that we&#39;re adding a section for this inserted row we skip it since it will handled by the section insertion.</span>
</span><span class='line'>            <span class="k">return</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">insertedRowIndexPaths</span> <span class="nl">addObject:</span><span class="n">newIndexPath</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="n">NSFetchedResultsChangeDelete</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="nl">containsIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// If we&#39;ve already been told that we&#39;re deleting a section for this deleted row we skip it since it will handled by the section deletion.</span>
</span><span class='line'>            <span class="k">return</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">deletedRowIndexPaths</span> <span class="nl">addObject:</span><span class="n">indexPath</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="n">NSFetchedResultsChangeMove</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="nl">containsIndex:</span><span class="n">newIndexPath</span><span class="p">.</span><span class="n">section</span><span class="p">]</span> <span class="o">==</span> <span class="n">NO</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">insertedRowIndexPaths</span> <span class="nl">addObject:</span><span class="n">newIndexPath</span><span class="p">];</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="nl">containsIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="p">]</span> <span class="o">==</span> <span class="n">NO</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">deletedRowIndexPaths</span> <span class="nl">addObject:</span><span class="n">indexPath</span><span class="p">];</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="n">NSFetchedResultsChangeUpdate</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">updatedRowIndexPaths</span> <span class="nl">addObject:</span><span class="n">indexPath</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controller:</span><span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span> <span class="nf">didChangeSection:</span><span class="p">(</span><span class="kt">id</span> <span class="p">)</span><span class="nv">sectionInfo</span> <span class="nf">atIndex:</span><span class="p">(</span><span class="n">NSUInteger</span><span class="p">)</span><span class="nv">sectionIndex</span>
</span><span class='line'>          <span class="nf">forChangeType:</span><span class="p">(</span><span class="n">NSFetchedResultsChangeType</span><span class="p">)</span><span class="nv">type</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">case</span> <span class="nl">NSFetchedResultsChangeInsert:</span>
</span><span class='line'>            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="nl">addIndex:</span><span class="n">sectionIndex</span><span class="p">];</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="k">case</span> <span class="nl">NSFetchedResultsChangeDelete:</span>
</span><span class='line'>            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="nl">addIndex:</span><span class="n">sectionIndex</span><span class="p">];</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="k">default</span><span class="o">:</span>
</span><span class='line'>            <span class="p">;</span> <span class="c1">// Shouldn&#39;t have a default</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controllerDidChangeContent:</span><span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">beginUpdates</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">deleteSections:</span><span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationAutomatic</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">insertSections:</span><span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationAutomatic</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">deleteRowsAtIndexPaths:</span><span class="n">self</span><span class="p">.</span><span class="n">deletedRowIndexPaths</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationLeft</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">insertRowsAtIndexPaths:</span><span class="n">self</span><span class="p">.</span><span class="n">insertedRowIndexPaths</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationRight</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">reloadRowsAtIndexPaths:</span><span class="n">self</span><span class="p">.</span><span class="n">updatedRowIndexPaths</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationAutomatic</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">endUpdates</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// nil out the collections so they are ready for their next use.</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">deletedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">insertedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">updatedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#pragma mark - Overridden getters</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * Lazily instantiate these collections.</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSMutableIndexSet</span> <span class="o">*</span><span class="p">)</span><span class="nf">deletedSectionIndexes</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">_deletedSectionIndexes</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">_deletedSectionIndexes</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableIndexSet</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">_deletedSectionIndexes</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSMutableIndexSet</span> <span class="o">*</span><span class="p">)</span><span class="nf">insertedSectionIndexes</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">_insertedSectionIndexes</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">_insertedSectionIndexes</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableIndexSet</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">_insertedSectionIndexes</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSMutableArray</span> <span class="o">*</span><span class="p">)</span><span class="nf">deletedRowIndexPaths</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">_deletedRowIndexPaths</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">_deletedRowIndexPaths</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">_deletedRowIndexPaths</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSMutableArray</span> <span class="o">*</span><span class="p">)</span><span class="nf">insertedRowIndexPaths</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">_insertedRowIndexPaths</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">_insertedRowIndexPaths</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">_insertedRowIndexPaths</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSMutableArray</span> <span class="o">*</span><span class="p">)</span><span class="nf">updatedRowIndexPaths</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">_updatedRowIndexPaths</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">_updatedRowIndexPaths</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">_updatedRowIndexPaths</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This implementation properly queues all the changes, makes sure not to insert or delete any rows when they are part of an inserted or deleted section, and updates the table in one nice little chunk. You don&rsquo;t need to worry about implementing the willChangeContent: delegate method. It also has the benefit that, if you were so inclined, you could see how many updates you were about to perform on the tableView and just call reloadData instead, like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controllerDidChangeContent:</span><span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">NSInteger</span> <span class="n">totalChanges</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="n">count</span><span class="p">]</span> <span class="o">+</span>
</span><span class='line'>                             <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="n">count</span><span class="p">]</span> <span class="o">+</span>
</span><span class='line'>                             <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">deletedRowIndexPaths</span> <span class="n">count</span><span class="p">]</span> <span class="o">+</span>
</span><span class='line'>                             <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">insertedRowIndexPaths</span> <span class="n">count</span><span class="p">]</span> <span class="o">+</span>
</span><span class='line'>                             <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">updatedRowIndexPaths</span> <span class="n">count</span><span class="p">];</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">totalChanges</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">deletedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">insertedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">updatedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">reloadData</span><span class="p">];</span>
</span><span class='line'>        <span class="k">return</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">beginUpdates</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">deleteSections:</span><span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationAutomatic</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">insertSections:</span><span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationAutomatic</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">deleteRowsAtIndexPaths:</span><span class="n">self</span><span class="p">.</span><span class="n">deletedRowIndexPaths</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationLeft</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">insertRowsAtIndexPaths:</span><span class="n">self</span><span class="p">.</span><span class="n">insertedRowIndexPaths</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationRight</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">reloadRowsAtIndexPaths:</span><span class="n">self</span><span class="p">.</span><span class="n">updatedRowIndexPaths</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationAutomatic</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">endUpdates</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">insertedSectionIndexes</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">deletedSectionIndexes</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">deletedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">insertedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">updatedRowIndexPaths</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you&rsquo;ve got any questions or if you notice some horrible bug that I&rsquo;ve introduced let me know on <a href="http://twitter.com/MrRooni">Twitter</a> or <a href="https://alpha.app.net/mrrooni">App.net</a>, I&rsquo;m MrRooni on both.</p>

<p>And if you&rsquo;re the kind of person that likes gists, you can find the above code on GitHub here: <a href="https://gist.github.com/MrRooni/4988922">https://gist.github.com/MrRooni/4988922</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/22/quick-and-easy-debugging-of-unrecognized-selector-sent-to-instance/">Quick and Easy Debugging of Unrecognized Selector Sent to Instance</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-22T14:13:39-04:00" pubdate data-updated="true">Aug 22<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&rsquo;s happened to all of us; we&rsquo;re merrily trucking down the development road, building and testing our app when all of sudden everything grinds to a screeching halt and the console tells us something like:</p>

<p><strong>&ndash;[MoneyWellAppDelegate doThatThingYouDo]: unrecognized selector sent to instance 0xa275230</strong></p>

<p>Looking at the Xcode backtrace doesn&rsquo;t seem to help either since it most likely looks like so:</p>

<p><a href="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/08/Screen-Shot-2012-08-22-at-2.02.11-PM.png"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/08/Screen-Shot-2012-08-22-at-2.02.11-PM.png" alt="" /></a></p>

<p>At this point you start the hunt through your code looking to see who sent the -doThatThingYouDo message. You may find the answer right away and things may be all hunky dory, or you may spend the next hour trying to figure out where the hell that call is coming from.</p>

<p>The good news is there is a better way. All you need to do is pop over to the Breakpoint Navigator, click the + button at the bottom and choose <strong>Add Symbolic Breakpoint&hellip;</strong></p>

<p>In the <strong>Symbol</strong> field enter this symbol:</p>

<pre><code>-[NSObject(NSObject) doesNotRecognizeSelector:]
</code></pre>

<p>Now when any instance of any object within your program is sent a message to which it does not respond you will be presented with a backtrace that takes you right to the point where that message was sent.</p>

<p><a href="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/08/Screen-Shot-2012-08-22-at-2.09.04-PM.png"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/08/Screen-Shot-2012-08-22-at-2.09.04-PM.png" alt="" /></a></p>

<p>Cheers and happy debugging.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/11/xibs-container-views-and-auto-layout-oh-my/">XIBs, Container Views, and Auto Layout (Oh My)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-11T16:23:01-04:00" pubdate data-updated="true">Jul 11<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While working on a major update for one of our products at <a href="http://nothirst.com/">No Thirst</a> I ran across a small implementation question: In the world of auto layout, if you have a window whose subviews are managed by view controllers, what is the best way to layout these subviews? In the realm of springs and struts the answer is pretty straightforward: You add container views to your window, define their autoresizing masks in the XIB, add your view controller views as subviews of the container views in code, and set their frame sizes to match their container view frame sizes. As long as you set the autoresizing masks of the view controller views to be <strong>NSViewHeightSizable | NSViewWidthSizable</strong> in their XIBs you get the behavior you&rsquo;re expecting and the code is pretty minimal.</p>

<p>[caption id=&ldquo;attachment_605&rdquo; align=&ldquo;aligncenter&rdquo; width=&ldquo;513&rdquo;]<a href="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/07/ShmetBencherWindow.png"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/07/ShmetBencherWindow.png" alt="" /></a> This is the window we&rsquo;re trying to create[/caption]</p>

<p>If you try to follow a similar pattern while using auto layout and do most of your work in XIBs with very little code you hit a bit of a curve in the road. With springs and struts you set your autoresizing masks on individual views allowing you to define what each view controller&rsquo;s view should do when added to a super view. Layout constraints (instances of <a href="https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html">NSLayoutConstraint</a>) define relationships <strong><em>between</em></strong> views. This means that in order to create a layout constraint between two views both views need to be present at the time the relationship is defined. Thinking I could outsmart the system I had what I thought was a eureka moment. &ldquo;Ah ha!&rdquo; I thought, &ldquo;I&rsquo;ll follow the same pattern of using container views, but in each view controller&rsquo;s awakeFromNib I&rsquo;ll set up some constraints that mimic NSViewHeightSizable | NSViewWidthSizable. I&rsquo;m a GENIUS!&rdquo;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">awakeFromNib</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">NSDictionary</span> <span class="o">*</span><span class="n">viewsDictionary</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@&quot;view&quot;</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">NSArray</span> <span class="o">*</span><span class="n">horizontalMaximizingConstraints</span> <span class="o">=</span><span class="err"> </span><span class="p">[</span><span class="n">NSLayoutConstraint</span> <span class="nl">constraintsWithVisualFormat:</span><span class="s">@&quot;|[view]|&quot;</span>
</span><span class='line'>                                                                                       <span class="nl">options:</span><span class="mi">0</span>
</span><span class='line'>                                                                                       <span class="nl">metrics:</span><span class="nb">nil</span>
</span><span class='line'>                                                                                         <span class="nl">views:</span><span class="n">viewsDictionary</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">NSArray</span> <span class="o">*</span><span class="n">verticalMaximizingConstraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSLayoutConstraint</span> <span class="nl">constraintsWithVisualFormat:</span><span class="s">@&quot;V:|[view]|&quot;</span>
</span><span class='line'>                                                                                     <span class="nl">options:</span><span class="mi">0</span>
</span><span class='line'>                                                                                     <span class="nl">metrics:</span><span class="nb">nil</span>
</span><span class='line'>                                                                                       <span class="nl">views:</span><span class="n">viewsDictionary</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">addConstraints:</span><span class="n">horizontalMaximizingConstraints</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">addConstraints:</span><span class="n">verticalMaximizingConstraints</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Uh, yeah, not so much:</p>

<pre><code>2012-07-11 14:02:07.339 Shmet Bencher[15158:303] *** Terminating app due to uncaught
exception 'NSInvalidArgumentException', reason: 'Unable to parse constraint format:
Unable to interpret '|' character, because the related view doesn't have a superview
|[view]|
       ^'
</code></pre>

<p>Apparently there was a reason interface builder wouldn’t let me define those constraints visually.</p>

<h2>Possible Solutions</h2>

<p>As far as I can see there are two possible solutions to the original question:</p>

<ol>
<li><p> Follow the container view pattern. In your XIB you define the relationships between the container views and then in code you add your view controller views to those container views and set up constraints similar to the ones I posted above. The difference being that the | character will now represent a super view that actually exists.</p></li>
<li><p> Skip container views, leave your XIB alone, add all your view controller views as direct subviews of the window and then define the relationships between them.</p></li>
</ol>


<p>Option 1 is great because working with auto layout in interface builder allows you to see the immediate results of changing constraints. However, interface builder will also inject constraints into your layout as you&rsquo;re working to try and make sure you don&rsquo;t end up with an ambiguous layout or unsatisfiable constraints. Option 1 is also nice because the code you end up writing to add the view controller views to their containers essentially becomes boilerplate. Yes, there is a lot of it, but because of the nature of it, it&rsquo;s easy to see when you&rsquo;ve made a mistake.</p>

<p>Option 2 is great because you&rsquo;ve reduced your view hierarchy and the constraints associated with each view were put there by you without interface builder getting in the way. Option 2 does suffer from the annoying side effects of having to write more code and not allowing you to play with your window size to see how constraints react until you&rsquo;ve created a set of constraints that properly defines the layout for the entire window.</p>

<p>So what&rsquo;s the answer?</p>

<h2>The Answer</h2>

<p>The answer, of course, is, &ldquo;it depends&rdquo;. According to Apple you should define your constraints using these methods, in descending order of preference:</p>

<ul>
<li><p>Within interface builder</p></li>
<li><p>Using the visual format language in code (as I did above)</p></li>
<li><p>Individually using the <strong>constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant:</strong> class method on NSLayoutConstraint</p></li>
</ul>


<p>In this particular case I&rsquo;m going to charge forward with Option 2 and I will update this post if that turns out to be a horrible idea. If I had a mixture of other elements in this window like labels or other buttons I&rsquo;d probably go for Option 1 but since it&rsquo;s just views, and only a handful of them at that, I&rsquo;m going to code it. However, for all of the view controller views I will be doing their layout in interface builder.</p>

<p>If you&rsquo;ve got some feedback, typos to point out, or just want to type obscenities at me, you should get in touch with me via Twitter: <a href="http://twitter.com/MrRooni">@MrRooni</a></p>

<p>If any of the information above is misinformed or just plain wrong definitely get in touch.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/21/wwdc-2012-photo-walk-wrap-up/">WWDC 2012 Photo Walk Wrap-Up</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-21T10:57:45-04:00" pubdate data-updated="true">Jun 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://500px.com/photo/8672882"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/06/Oakland-Bay-Bridge-Pano.jpg" alt="" /></a></p>

<p>The <a href="http://www.fruitstandsoftware.com/blog/2012/06/wwdc-2012-photo-walk/">WWDC 2012 Photo Walk sponsored by 500px</a> was a huge success! We had an incredible turnout that, quite honestly, blew me away.</p>

<p>As a last minute surprise we had the fine folks from <a href="http://www.speckproducts.com/iphone-case/iphone-4-case.html">Speck</a> come out to demonstrate their upcoming CandyShell Focus case for iPhone 4 and iPhone 4S. To cap it all off they handed out a bunch of them to the attendees. I&rsquo;ve had mine on my phone since the walk and I love it. I&rsquo;ll admit I don&rsquo;t do too much photography with my phone, but I have found myself using the stand for FaceTime calls and just for standing up the phone on my desk. If you&rsquo;d like more info on it you should get in touch with Erica on Twitter <a href="http://twitter.com/2bmighty">@2bmighty</a>, and tell her <a href="http://twitter.com/MrRooni">@MrRooni</a> sent you. (Not for any good reason, but let&rsquo;s be honest, it&rsquo;s just fun to end a sentence with, &ldquo;tell them I sent you&rdquo;)</p>

<p><a href="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/06/CandyShellFocusBySpeck.jpg"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/06/CandyShellFocusBySpeck.jpg" alt="" /></a></p>

<p>We also had the guys from <a href="http://macphun.com">MacPhun</a> show up and very generously offer a free license to their new photography product, <a href="http://itunes.apple.com/us/app/snapheal/id480623975?mt=12">Snapheal</a>, to everyone who attended. If you went on the walk and you&rsquo;d like a copy of Snapheal just send an email to me (michael [at] this domain) and Alex Tsepko (atsepko [at] macphun) with your favorite photo from the walk. I haven&rsquo;t actually had a chance to try it out yet, but I heard from a few people on the walk that use MacPhun&rsquo;s other photography products and love them.</p>

<p>As you know, for those that participated in the walk, the editors at <a href="http://500px.com/">500px</a> are going to choose their two favorite photographs from the walk and upgrade those photographer&rsquo;s accounts to Plus and Awesome. All you have to do is upload your photos to your 500px account and tag the photos with the tag <a href="http://500px.com/search?tag=WWDC-photowalk">wwdc-photowalk</a>. The last day to upload your best shots for a chance to get your account upgraded is <del>Thursday, June 21st</del> TODAY. You can find my shots in a set on 500px here: <a href="http://500px.com/MrRooni/sets/wwdc_2012_photo_walk_sponsored_by_500px">WWDC 2012 Photo Walk sponsored by 500px</a>. If you&rsquo;d like to see all my photos from WWDC you can find them here: <a href="http://500px.com/MrRooni/sets/wwdc_2012">WWDC 2012</a></p>

<p>I know I mentioned it above, but we really did have a great turnout. So good in fact, that people are already asking me to organize one for next year. To that end I&rsquo;ve created a new Twitter account dedicated to the walk: <a href="http://twitter.com/WWDCPhotoWalk">@WWDCPhotoWalk</a>. You should follow that account for any and all info on the next walk.</p>

<p>Thank you to everyone who came out, you all exceeded my expectations, and I&rsquo;ll see you next year.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/05/what-to-do-if-your-sandbox-application-shows-up-as-not-sandboxed/">What to Do if Your Sandboxed Application Shows Up as Not Sandboxed</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-05T19:23:21-04:00" pubdate data-updated="true">Jun 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This afternoon I started working on turning <a href="http://nothirst.com/moneywell/">MoneyWell for Mac</a> into a sandboxed application for our next major release. I watched the <a href="https://developer.apple.com/devcenter/mac/app-sandbox/">intro videos</a>, checked the appropriate checkboxes in Xcode, ran MoneyWell, checked Activity Monitor and saw&hellip;</p>

<p><a href="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/06/Activity-Monitor-1-1.jpg"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/06/Activity-Monitor-1-1.jpg" alt="" /></a></p>

<p>Well crap. After a bit of unsuccessful searching on the <a href="https://devforums.apple.com/community/mac?view=discussions">Apple Dev Forums</a> I did some testing with <a href="http://twitter.com/kevinhoctor">Kevin Hoctor</a> and discovered that the <strong>Release</strong> configuration of MoneyWell was properly sandboxed. The only significant difference between the <strong>Release</strong> and <strong>Debug</strong> configurations was that one was code signed and one was not. Once we enabled code signing for the <strong>Debug</strong> configuration MoneyWell launched as a sandboxed app.</p>

<p>I asked on Twitter,</p>

<blockquote><p><a href="http://twitter.com/MrRooni/status/210136419224649728">Is it common knowledge that an app that is not code signed will run in non-sandboxed mode even with sandboxing enabled?</a></p></blockquote>

<p>Both Brian Webster and Jim Correia got back to me:</p>

<blockquote><p><a href="http://twitter.com/bwebster">@bwebster</a>: <a href="http://twitter.com/bwebster/status/210142826468618240">That does make sense, since it is the code sign tool that&rsquo;s used to encode the sandbox entitlements when building.</a></p></blockquote>

<p><a href="http://twitter.com/jimcorreia">@jimcorreia</a>: <a href="http://twitter.com/jimcorreia/status/210143389579096065">The app-sandbox is an entitlement. Entitlements are embedded in the code signature.</a></p>

<p>Hopefully this helps you out if you find that your sandboxed app is showing up as not sandboxed.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/01/the-definitive-wwdc-2012-party-event-list/">The Definitive WWDC 2012 Party & Event List</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-01T09:16:53-04:00" pubdate data-updated="true">Jun 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you&rsquo;re going to be in San Francisco during WWDC make sure you check out the <a href="http://macindie.com/2012/05/the-definitive-wwdc12-party-event-list/">Definitive WWDC’12 Party &amp; Event List</a> over on <a href="http://macindie.com/">macindie.com</a>. These guys really stay on top of everything that&rsquo;s happening during the week and it&rsquo;s a great resource for keeping up with the myriad events. You should pay particular attention to Wednesday, it looks like <a href="http://twitter.com/MrRooni">someone</a> scheduled an awesome <a href="http://www.fruitstandsoftware.com/blog/2012/06/wwdc-2012-photo-walk/">photography-related event</a>.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/06/09/gcd-in-swift-it-just-works/">GCD in Swift: It Just Works</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/23/sponsoring-the-wwdc-2013-photo-walk/">Sponsoring the WWDC 2013 Photo Walk</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/23/wwdc-2013-photo-walk/">WWDC 2013 Photo Walk</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/10/link-dump/">Link Dump</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/19/uitableview-and-nsfetchedresultscontroller-updates-done-right/">UITableView and NSFetchedResultsController: Updates Done Right</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Michael Fey -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
