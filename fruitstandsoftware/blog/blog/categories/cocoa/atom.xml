<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Cocoa | Core Fruition]]></title>
  <link href="http://fruitstandsoftware.com//blog/categories/cocoa/atom.xml" rel="self"/>
  <link href="http://fruitstandsoftware.com//"/>
  <updated>2014-06-10T09:28:16-04:00</updated>
  <id>http://fruitstandsoftware.com//</id>
  <author>
    <name><![CDATA[Michael Fey]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Sponsoring the WWDC 2013 Photo Walk]]></title>
    <link href="http://fruitstandsoftware.com//blog/2013/05/23/sponsoring-the-wwdc-2013-photo-walk/"/>
    <updated>2013-05-23T15:49:53-04:00</updated>
    <id>http://fruitstandsoftware.com//blog/2013/05/23/sponsoring-the-wwdc-2013-photo-walk</id>
    <content type="html"><![CDATA[<p>If you haven&rsquo;t heard, the second annual <a href="http://www.fruitstandsoftware.com/blog/2013/05/wwdc-2013-photo-walk/">WWDC Photo Walk is set for Wednesday June 12th at 6:15 PM</a>. If you&rsquo;d like to sponsor the walk I&rsquo;d love to have you on board. Now you may be asking yourself, &ldquo;Sponsorship? What costs are associated with a photo walk?&rdquo; Well that&rsquo;s the beauty of it, there are none! Sponsorship in this case means having your product or company name listed in the walk details, promoted on the <a href="http://twitter.com/wwdcphotowalk">WWDC Photo Walk Twitter account</a>, and promoted within the <a href="https://app.glassboard.com/web/invitation/code/nyzzu">WWDC Photo Walk Glassboard</a> in exchange for some promo codes or discounts given out to the walk participants.</p>

<p>For instance, last year we had <a href="http://www.fruitstandsoftware.com/blog/2012/06/wwdc-2012-photo-walk/">500px sponsor us</a> with one Awesome and one Plus account for the two folks <a href="http://www.fruitstandsoftware.com/blog/2012/06/wwdc-2012-photo-walk-wrap-up/">whose photos were the best</a>.</p>

<p>So if you&rsquo;re interested please send me an email at michael at this domain and we&rsquo;ll get the ball rolling.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[WWDC 2013 Photo Walk]]></title>
    <link href="http://fruitstandsoftware.com//blog/2013/05/23/wwdc-2013-photo-walk/"/>
    <updated>2013-05-23T15:19:04-04:00</updated>
    <id>http://fruitstandsoftware.com//blog/2013/05/23/wwdc-2013-photo-walk</id>
    <content type="html"><![CDATA[<p><strong>[Updated] </strong>Last week I put out the call for sponsors and OMGWTFBBQ did people respond. Check out the great list of sponsors for this year&rsquo;s walk, in alphabetical order:</p>

<p><a href="https://agilebits.com/onepassword"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/1Password.png" alt="1Password" /></a>
<strong>1Password</strong></p>

<p>The fine folks at <a href="https://agilebits.com/">AgileBits</a> have offered up a free copy of <a href="https://agilebits.com/onepassword/mac">1Password for Mac</a> to each walk participant. 25 lucky folks will also receive a promo code for <a href="https://agilebits.com/onepassword/ios">1Password for iOS</a>.</p>

<p>If you&rsquo;re not able to attend the walk AgileBits is currently <a href="http://blog.agilebits.com/2013/05/29/get-50-off-1password-and-knox-100-more-security-in-your-life/">running a 50% sale</a>, so get it while it&rsquo;s hot!</p>

<p><a href="http://www.flyingmeat.com/acorn/"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/Acorn.png" alt="Acorn" /></a>
<strong>Acorn</strong></p>

<p><a href="https://twitter.com/ccgus">Gus Mueller</a>&rsquo;s venerable image editing app <a href="http://www.flyingmeat.com/acorn/">Acorn</a> hit version 4.0 this year and to celebrate Gus is giving away a couple of copies to the folks that come away with the best photos from this year&rsquo;s walk.</p>

<p>Additionally, Gus is offering up a discount code for Acorn to every other participant.</p>

<p><a href="http://www.geotagbee.com/"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/geotagbee.png" alt="geotagbee" /></a>
<strong>GeoTagBee</strong></p>

<p><a href="https://twitter.com/ekurutepe">Engin Kurutepe</a> is offering up a number of copies of his brand new app <a href="http://www.geotagbee.com/">GeoTagBee</a>. GeoTagBee is a simple iPhone app which records your location in the background and exports your trips as GPX files to your Dropbox or Email. These GPX files then can be used in Lightroom or Aperture to geotag your photos.</p>

<p>Engin has also hinted that he may bring one or two souvenirs from Berlin to give away to some lucky participants.</p>

<p><strong><a href="http://macphun.com"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/macphun_logo.png" alt="macphun_logo" /></a></strong></p>

<p>The gents at <a href="http://macphun.com">MacPhun</a> surprised us during last year&rsquo;s walk by turning up and giving everyone a copy of their awesome photo editing app <a href="http://snapheal.macphun.com/jh">Snapheal</a>. This year they&rsquo;re back with more. In their own words:</p>

<p>MacPhun is one of the leading developers of photography applications for Mac and iOS. Their app Snapheal was named one of 2012 Best Mac App Store apps. And <a href="https://itunes.apple.com/us/app/fx-photo-studio-pro-effects/id312506856?mt=8">FX Photo Studio for iPhone</a> (free for limited time) is about to pass 10 million downloads. MacPhun Team has a new photo app coming this summer and everyone who registers for the WWDC photo walk will get a free copy of it. The beta version of the app will be available to a limited number of photographers (and all those who sign up for the WWDC photo walk) later in June. Meanwhile you can get MacPhun&rsquo;s Snapheal with a 40% discount. Check it <a href="https://itunes.apple.com/us/app/snapheal/id480623975?mt=12">here</a>.</p>

<p><a href="http://nothirst.com/moneywell/"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/MoneyWell.png" alt="MoneyWell" /></a>
<strong>MoneyWell</strong></p>

<p>Let&rsquo;s face it, photography gear is expensive and it takes discipline to save up your money for that next great lens and budget properly for all your other expenses.</p>

<p>Luckily No Thirst is here to help. <a href="https://twitter.com/kevinhoctor">Kevin Hoctor</a> has generously offered up a free copy of <a href="http://nothirst.com/moneywell/">MoneyWell for Mac</a> to every walk participant.</p>

<p>MoneyWell is personal finance software that increases your wealth while reducing your debt. It does this by wrapping the tried and true envelope-budgeting system in a beautiful, modern interface.</p>

<p>If you&rsquo;re not able to attend the walk then you should grab MoneyWell now, <a href="http://mad.ly/97b2c3">version 2.2 has just been released and is 22% off for 2.2 weeks</a>. That makes it $38.99 until June 14, 2013.</p>

<p><a href="http://www.pixelmator.com"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/Pixelmator.png" alt="Pixelmator" /></a>
<strong>Pixelmator</strong></p>

<p><a href="http://www.pixelmator.com">Pixelmator</a> has been a juggernaut in the Mac app scene and the folks on the Pixelmator team have been kind enough to offer up a free license to one lucky walk participant.</p>

<p>Pixelmator has been built exclusively for OS X and it shows. The latest version, 2.2 Blueberry, adds a ton of great features and they are showing no signs of slowing down.</p>

<p><a href="https://printzel.it"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/printzel-brandmark.png" alt="Printzel" /></a>
<strong>Printzel</strong></p>

<p>Ordering high quality photo books directly from your iPad gets a huge step up with <a href="https://printzel.it">Printzel</a>. This very cool app lets you take photos directly from your iPad&rsquo;s photo collection and turn them into beautiful hard or soft cover books that will be delivered directly to your door.</p>

<p>Also ratcheting up the cool factor is the fact that they&rsquo;ve also <a href="https://printzel.it/developer">released an SDK</a> that enables app developers to offer printed books right from within their own apps.</p>

<p>Every walk attendee will receive a 25%-off coupon code and 10 others will each receive a coupon for 100%-off their order!</p>

<p><a href="http://frosthaus.com/sequence/"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/06/20130606-204644.jpg" alt="Sequence" /></a>
<strong>Sequence</strong></p>

<p><a href="http://frosthaus.com/sequence/">Sequence</a> is a very cool time lapse post-production app that takes the scores of images you make during a time lapse session and assembles them into a white-balanced, deflickered video.</p>

<p>A handful of lucky walk attendees will be walking away with free copies of Sequence this year thanks to the good people at <a href="http://frosthaus.com">Frosthaus</a>.</p>

<p><strong>[Original Post]</strong></p>

<h1>tl;dr version:</h1>

<p><strong>What:</strong> A photo walk during WWDC</p>

<p><strong>When:</strong> Wednesday, June 12th from 6:15 &ndash; ?</p>

<p><strong>Who:</strong> You, me, and all our friends.</p>

<p><strong>Why:</strong> Because making photos is fun and doing it with a bunch of people has to be fun too, right?</p>

<p><strong>Where:</strong> <a href="http://goo.gl/maps/Yuu2a">From the Powell Street BART to Pier 39</a>. Please note this is a longer walk this year (about 2 miles) with some decent uphill sections.</p>

<p><strong>RSVP:</strong> Not required, but it&rsquo;d be nice to hear that you&rsquo;re coming. Send me a message on <a href="http://twitter.com/MrRooni">Twitter</a> or an email to michael at this domain.</p>

<p><strong>Connect: </strong>WWDCPhotoWalk on <a href="http://twitter.com/wwdcphotowalk">Twitter</a> and <a href="http://alpha.app.net/wwdcphotowalk">App.net</a>. We&rsquo;re also running a Glassboard for this one, which I highly recommend you join: <a href="https://app.glassboard.com/web/invitation/code/nyzzu">WWDC Photo Walk Glassboard</a>.</p>

<h1>The Long Winded Version</h1>

<p>During WWDC we have an awesome opportunity to get together with other photo geeks and make some great photos of one of the coolest cities in the world. As such, I figured it would be cool to organize a photo walk. We&rsquo;ll meet up on the <a href="http://goo.gl/maps/AW4G">street at the Powell Street BART</a> at 6:15 on Wednesday, June 12th. There are usually a good number of street performers around so it should make for a great location to wait while everyone shows up. Shortly thereafter we&rsquo;ll head north on Powell Street and head towards San Francisco&rsquo;s famous <a href="http://www.pier39.com/home/attractions/on-the-pier/sea-lions/">Pier 39</a>.</p>

<p>Sunset is at <a href="http://www.timeanddate.com/worldclock/astronomy.html?n=224&amp;month=6&amp;year=2013&amp;obj=sun&amp;afl=-11&amp;day=1">8:32PM</a> and if we time it right we should get some cool light to end the walk.</p>

<p>There&rsquo;s no need to RSVP, but it&rsquo;d be great to know if you&rsquo;re coming so please send me a message on <a href="http://twitter.com/MrRooni">Twitter</a> or an email to michael at this domain.</p>

<p>This year we&rsquo;re going to be using <a href="https://app.glassboard.com/web/invitation/code/nyzzu">Glassboard</a> for any realtime communication once we&rsquo;re all in San Francisco. If you need to get a hold of me in a time-sensitive way use <a href="https://app.glassboard.com/web/invitation/code/nyzzu">the Glassboard,</a> I will have all its push notifications turned on.</p>

<p><a href="http://goo.gl/maps/Yuu2a"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2013/05/Screenshot_5_23_13_3_12_PM.png" alt="Powell Street BART to Pier 39" /></a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UITableView and NSFetchedResultsController: Updates Done Right]]></title>
    <link href="http://fruitstandsoftware.com//blog/2013/02/19/uitableview-and-nsfetchedresultscontroller-updates-done-right/"/>
    <updated>2013-02-19T13:56:05-05:00</updated>
    <id>http://fruitstandsoftware.com//blog/2013/02/19/uitableview-and-nsfetchedresultscontroller-updates-done-right</id>
    <content type="html"><![CDATA[<p>While working on <a href="http://nothirst.com/moneywellexpress/">MoneyWell Express</a> 1.0 I decided to finally sit down and figure out a bug that had plagued me for a long time: Periodic and seemingly random crashes when updating MoneyWell&rsquo;s transaction UITableView. If you&rsquo;ve spent any significant time with UITableView you&rsquo;ve undoubtably seen an error similar to this one:</p>

<pre><code>*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:1070
CoreData: error: Serious application error.
An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:.
Invalid update: invalid number of rows in section 2.
The number of rows contained in an existing section after the update (2) must be equal to the number of rows contained in that section before the update (1),
plus or minus the number of rows inserted or deleted from that section (0 inserted, 0 deleted) and
plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out). with userInfo (null)
</code></pre>

<p>The problem with this bug for me was that it was intermittent and never reliably reproducible &ndash; until it was. One day while working on our <a href="https://github.com/nothirst/TICoreDataSync/">syncing framework</a> I had this issue start to reproduce itself every time MoneyWell Express attempted to consume some sync changes and I seized the opportunity to finally figure out what was going on.</p>

<p>Let&rsquo;s start by taking a look at the sample code Apple provides on the <a href="http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html">NSFetchedResultsControllerDelegate Protocol Reference</a>:</p>

<p>```objective-c</p>

<pre><code>/*
   Assume self has a property 'tableView' -- as is the case for an instance of a UITableViewController
   subclass -- and a method configureCell:atIndexPath: which updates the contents of a given cell
   with information from a managed object at the given index path in the fetched results controller.
 */

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo
    atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    switch (type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath
          forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch (type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}
</code></pre>

<p>```</p>

<p>As you can see this code starts the tableView updates in controllerWillChangeContent:, responds to each change as it happens, and then ends the tableView updates in controllerDidChangeContent:. The problem I ran into with this code is that inserting sections into the table also inserted all the rows for that new section, but since those rows were also being reported as inserted we would get twice the number of rows inserted when adding a new section to the table. The answer was to queue up all the updates that the fetchedResultsController reported and then respond to them all at once, like so:</p>

<p>```objective-c</p>

<pre><code>@interface SomeViewController ()

// Declare some collection properties to hold the various updates we might get from the NSFetchedResultsControllerDelegate
@property (nonatomic, strong) NSMutableIndexSet *deletedSectionIndexes;
@property (nonatomic, strong) NSMutableIndexSet *insertedSectionIndexes;
@property (nonatomic, strong) NSMutableArray *deletedRowIndexPaths;
@property (nonatomic, strong) NSMutableArray *insertedRowIndexPaths;
@property (nonatomic, strong) NSMutableArray *updatedRowIndexPaths;

@end

@implementation SomeViewController

#pragma mark - NSFetchedResultsControllerDelegate methods

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath
          forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath
{
    if (type == NSFetchedResultsChangeInsert) {
        if ([self.insertedSectionIndexes containsIndex:newIndexPath.section]) {
            // If we've already been told that we're adding a section for this inserted row we skip it since it will handled by the section insertion.
            return;
        }

        [self.insertedRowIndexPaths addObject:newIndexPath];
    } else if (type == NSFetchedResultsChangeDelete) {
        if ([self.deletedSectionIndexes containsIndex:indexPath.section]) {
            // If we've already been told that we're deleting a section for this deleted row we skip it since it will handled by the section deletion.
            return;
        }

        [self.deletedRowIndexPaths addObject:indexPath];
    } else if (type == NSFetchedResultsChangeMove) {
        if ([self.insertedSectionIndexes containsIndex:newIndexPath.section] == NO) {
            [self.insertedRowIndexPaths addObject:newIndexPath];
        }

        if ([self.deletedSectionIndexes containsIndex:indexPath.section] == NO) {
            [self.deletedRowIndexPaths addObject:indexPath];
        }
    } else if (type == NSFetchedResultsChangeUpdate) {
        [self.updatedRowIndexPaths addObject:indexPath];
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo atIndex:(NSUInteger)sectionIndex
          forChangeType:(NSFetchedResultsChangeType)type
{
    switch (type) {
        case NSFetchedResultsChangeInsert:
            [self.insertedSectionIndexes addIndex:sectionIndex];
            break;
        case NSFetchedResultsChangeDelete:
            [self.deletedSectionIndexes addIndex:sectionIndex];
            break;
        default:
            ; // Shouldn't have a default
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];

    [self.tableView deleteSections:self.deletedSectionIndexes withRowAnimation:UITableViewRowAnimationAutomatic];
    [self.tableView insertSections:self.insertedSectionIndexes withRowAnimation:UITableViewRowAnimationAutomatic];

    [self.tableView deleteRowsAtIndexPaths:self.deletedRowIndexPaths withRowAnimation:UITableViewRowAnimationLeft];
    [self.tableView insertRowsAtIndexPaths:self.insertedRowIndexPaths withRowAnimation:UITableViewRowAnimationRight];
    [self.tableView reloadRowsAtIndexPaths:self.updatedRowIndexPaths withRowAnimation:UITableViewRowAnimationAutomatic];

    [self.tableView endUpdates];

    // nil out the collections so they are ready for their next use.
    self.insertedSectionIndexes = nil;
    self.deletedSectionIndexes = nil;
    self.deletedRowIndexPaths = nil;
    self.insertedRowIndexPaths = nil;
    self.updatedRowIndexPaths = nil;
}

#pragma mark - Overridden getters

/**
 * Lazily instantiate these collections.
 */

- (NSMutableIndexSet *)deletedSectionIndexes
{
    if (_deletedSectionIndexes == nil) {
        _deletedSectionIndexes = [[NSMutableIndexSet alloc] init];
    }

    return _deletedSectionIndexes;
}

- (NSMutableIndexSet *)insertedSectionIndexes
{
    if (_insertedSectionIndexes == nil) {
        _insertedSectionIndexes = [[NSMutableIndexSet alloc] init];
    }

    return _insertedSectionIndexes;
}

- (NSMutableArray *)deletedRowIndexPaths
{
    if (_deletedRowIndexPaths == nil) {
        _deletedRowIndexPaths = [[NSMutableArray alloc] init];
    }

    return _deletedRowIndexPaths;
}

- (NSMutableArray *)insertedRowIndexPaths
{
    if (_insertedRowIndexPaths == nil) {
        _insertedRowIndexPaths = [[NSMutableArray alloc] init];
    }

    return _insertedRowIndexPaths;
}

- (NSMutableArray *)updatedRowIndexPaths
{
    if (_updatedRowIndexPaths == nil) {
        _updatedRowIndexPaths = [[NSMutableArray alloc] init];
    }

    return _updatedRowIndexPaths;
}

@end
</code></pre>

<p>```</p>

<p>This implementation properly queues all the changes, makes sure not to insert or delete any rows when they are part of an inserted or deleted section, and updates the table in one nice little chunk. You don&rsquo;t need to worry about implementing the willChangeContent: delegate method. It also has the benefit that, if you were so inclined, you could see how many updates you were about to perform on the tableView and just call reloadData instead, like so:</p>

<p>```objective-c</p>

<pre><code>- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    NSInteger totalChanges = [self.deletedSectionIndexes count] +
                             [self.insertedSectionIndexes count] +
                             [self.deletedRowIndexPaths count] +
                             [self.insertedRowIndexPaths count] +
                             [self.updatedRowIndexPaths count];
    if (totalChanges &gt; 50) {
        self.insertedSectionIndexes = nil;
        self.deletedSectionIndexes = nil;
        self.deletedRowIndexPaths = nil;
        self.insertedRowIndexPaths = nil;
        self.updatedRowIndexPaths = nil;

        [self.tableView reloadData];
        return;
    }

    [self.tableView beginUpdates];

    [self.tableView deleteSections:self.deletedSectionIndexes withRowAnimation:UITableViewRowAnimationAutomatic];
    [self.tableView insertSections:self.insertedSectionIndexes withRowAnimation:UITableViewRowAnimationAutomatic];

    [self.tableView deleteRowsAtIndexPaths:self.deletedRowIndexPaths withRowAnimation:UITableViewRowAnimationLeft];
    [self.tableView insertRowsAtIndexPaths:self.insertedRowIndexPaths withRowAnimation:UITableViewRowAnimationRight];
    [self.tableView reloadRowsAtIndexPaths:self.updatedRowIndexPaths withRowAnimation:UITableViewRowAnimationAutomatic];

    [self.tableView endUpdates];

    self.insertedSectionIndexes = nil;
    self.deletedSectionIndexes = nil;
    self.deletedRowIndexPaths = nil;
    self.insertedRowIndexPaths = nil;
    self.updatedRowIndexPaths = nil;
}
</code></pre>

<p>```</p>

<p>If you&rsquo;ve got any questions or if you notice some horrible bug that I&rsquo;ve introduced let me know on <a href="http://twitter.com/MrRooni">Twitter</a> or <a href="https://alpha.app.net/mrrooni">App.net</a>, I&rsquo;m MrRooni on both.</p>

<p>And if you&rsquo;re the kind of person that likes gists, you can find the above code on GitHub here: <a href="https://gist.github.com/MrRooni/4988922">https://gist.github.com/MrRooni/4988922</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Quick and easy debugging of unrecognized selector sent to instance]]></title>
    <link href="http://fruitstandsoftware.com//blog/2012/08/22/quick-and-easy-debugging-of-unrecognized-selector-sent-to-instance/"/>
    <updated>2012-08-22T14:13:39-04:00</updated>
    <id>http://fruitstandsoftware.com//blog/2012/08/22/quick-and-easy-debugging-of-unrecognized-selector-sent-to-instance</id>
    <content type="html"><![CDATA[<p>It&rsquo;s happened to all of us; we&rsquo;re merrily trucking down the development road, building and testing our app when all of sudden everything grinds to a screeching halt and the console tells us something like:</p>

<p><strong>&ndash;[MoneyWellAppDelegate doThatThingYouDo]: unrecognized selector sent to instance 0xa275230</strong></p>

<p>Looking at the Xcode backtrace doesn&rsquo;t seem to help either since it most likely looks like so:</p>

<p><a href="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/08/Screen-Shot-2012-08-22-at-2.02.11-PM.png"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/08/Screen-Shot-2012-08-22-at-2.02.11-PM.png" alt="" /></a></p>

<p>At this point you start the hunt through your code looking to see who sent the -doThatThingYouDo message. You may find the answer right away and things may be all hunky dory, or you may spend the next hour trying to figure out where the hell that call is coming from.</p>

<p>The good news is there is a better way. All you need to do is pop over to the Breakpoint Navigator, click the + button at the bottom and choose <strong>Add Symbolic Breakpoint&hellip;</strong></p>

<p>In the <strong>Symbol</strong> field enter this symbol:</p>

<pre><code>-[NSObject(NSObject) doesNotRecognizeSelector:]
</code></pre>

<p>Now when any instance of any object within your program is sent a message to which it does not respond you will be presented with a backtrace that takes you right to the point where that message was sent.</p>

<p><a href="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/08/Screen-Shot-2012-08-22-at-2.09.04-PM.png"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/08/Screen-Shot-2012-08-22-at-2.09.04-PM.png" alt="" /></a></p>

<p>Cheers and happy debugging.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[XIBs, Container Views, and Auto Layout (oh my)]]></title>
    <link href="http://fruitstandsoftware.com//blog/2012/07/11/xibs-container-views-and-auto-layout-oh-my/"/>
    <updated>2012-07-11T16:23:01-04:00</updated>
    <id>http://fruitstandsoftware.com//blog/2012/07/11/xibs-container-views-and-auto-layout-oh-my</id>
    <content type="html"><![CDATA[<p>While working on a major update for one of our products at <a href="http://nothirst.com/">No Thirst</a> I ran across a small implementation question: In the world of auto layout, if you have a window whose subviews are managed by view controllers, what is the best way to layout these subviews? In the realm of springs and struts the answer is pretty straightforward: You add container views to your window, define their autoresizing masks in the XIB, add your view controller views as subviews of the container views in code, and set their frame sizes to match their container view frame sizes. As long as you set the autoresizing masks of the view controller views to be <strong>NSViewHeightSizable | NSViewWidthSizable</strong> in their XIBs you get the behavior you&rsquo;re expecting and the code is pretty minimal.</p>

<p>[caption id=&ldquo;attachment_605&rdquo; align=&ldquo;aligncenter&rdquo; width=&ldquo;513&rdquo;]<a href="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/07/ShmetBencherWindow.png"><img src="http://www.fruitstandsoftware.com/blog/wp-content/uploads/2012/07/ShmetBencherWindow.png" alt="" /></a> This is the window we&rsquo;re trying to create[/caption]</p>

<p>If you try to follow a similar pattern while using auto layout and do most of your work in XIBs with very little code you hit a bit of a curve in the road. With springs and struts you set your autoresizing masks on individual views allowing you to define what each view controller&rsquo;s view should do when added to a super view. Layout constraints (instances of <a href="https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html">NSLayoutConstraint</a>) define relationships <strong><em>between</em></strong> views. This means that in order to create a layout constraint between two views both views need to be present at the time the relationship is defined. Thinking I could outsmart the system I had what I thought was a eureka moment. &ldquo;Ah ha!&rdquo; I thought, &ldquo;I&rsquo;ll follow the same pattern of using container views, but in each view controller&rsquo;s awakeFromNib I&rsquo;ll set up some constraints that mimic NSViewHeightSizable | NSViewWidthSizable. I&rsquo;m a GENIUS!&rdquo;</p>

<p>```objective-c</p>

<pre><code>- (void)awakeFromNib
{
    NSDictionary *viewsDictionary = @{ @"view":self.view };

    NSArray *horizontalMaximizingConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[view]|"
                                                                                       options:0
                                                                                       metrics:nil
                                                                                         views:viewsDictionary];

    NSArray *verticalMaximizingConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view]|"
                                                                                     options:0
                                                                                     metrics:nil
                                                                                       views:viewsDictionary];
    [self.view addConstraints:horizontalMaximizingConstraints];
    [self.view addConstraints:verticalMaximizingConstraints];
}
</code></pre>

<p>```</p>

<p>Uh, yeah, not so much:</p>

<pre><code>2012-07-11 14:02:07.339 Shmet Bencher[15158:303] *** Terminating app due to uncaught
exception 'NSInvalidArgumentException', reason: 'Unable to parse constraint format:
Unable to interpret '|' character, because the related view doesn't have a superview
|[view]|
       ^'
</code></pre>

<p>Apparently there was a reason interface builder wouldn’t let me define those constraints visually.</p>

<h2>Possible Solutions</h2>

<p>As far as I can see there are two possible solutions to the original question:</p>

<ol>
<li><p> Follow the container view pattern. In your XIB you define the relationships between the container views and then in code you add your view controller views to those container views and set up constraints similar to the ones I posted above. The difference being that the | character will now represent a super view that actually exists.</p></li>
<li><p> Skip container views, leave your XIB alone, add all your view controller views as direct subviews of the window and then define the relationships between them.</p></li>
</ol>


<p>Option 1 is great because working with auto layout in interface builder allows you to see the immediate results of changing constraints. However, interface builder will also inject constraints into your layout as you&rsquo;re working to try and make sure you don&rsquo;t end up with an ambiguous layout or unsatisfiable constraints. Option 1 is also nice because the code you end up writing to add the view controller views to their containers essentially becomes boilerplate. Yes, there is a lot of it, but because of the nature of it, it&rsquo;s easy to see when you&rsquo;ve made a mistake.</p>

<p>Option 2 is great because you&rsquo;ve reduced your view hierarchy and the constraints associated with each view were put there by you without interface builder getting in the way. Option 2 does suffer from the annoying side effects of having to write more code and not allowing you to play with your window size to see how constraints react until you&rsquo;ve created a set of constraints that properly defines the layout for the entire window.</p>

<p>So what&rsquo;s the answer?</p>

<h2>The Answer</h2>

<p>The answer, of course, is, &ldquo;it depends&rdquo;. According to Apple you should define your constraints using these methods, in descending order of preference:</p>

<ul>
<li><p>Within interface builder</p></li>
<li><p>Using the visual format language in code (as I did above)</p></li>
<li><p>Individually using the <strong>constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant:</strong> class method on NSLayoutConstraint</p></li>
</ul>


<p>In this particular case I&rsquo;m going to charge forward with Option 2 and I will update this post if that turns out to be a horrible idea. If I had a mixture of other elements in this window like labels or other buttons I&rsquo;d probably go for Option 1 but since it&rsquo;s just views, and only a handful of them at that, I&rsquo;m going to code it. However, for all of the view controller views I will be doing their layout in interface builder.</p>

<p>If you&rsquo;ve got some feedback, typos to point out, or just want to type obscenities at me, you should get in touch with me via Twitter: <a href="http://twitter.com/MrRooni">@MrRooni</a></p>

<p>If any of the information above is misinformed or just plain wrong definitely get in touch.</p>
]]></content>
  </entry>
  
</feed>
